/**
 * Encode an EventSource message or comment
 *
 * @param chunk - The message/comment to encode
 * @returns A well-formatted string ready to be sent to a client
 * @public
 */
export declare function encode(chunk: EventSourceChunk): string

/**
 * Encode a comment as a well-formed EventSource "comment".
 * Each line will be prefixed with a comment prefix, eg `:`.
 *
 * @param comment - The comment to encode
 * @returns A well-formed EventSource "comment"
 * @public
 */
export declare function encodeComment(comment: string): string

/**
 * Encode the given text as a chunk of EventSource data. Note that newlines are normalized to
 * line feed characters (`\n`) - any carriage return (`\r`) are lost in the process.
 *
 * @param text - The text to encode. Each line starts with a `data: `-prefix.
 * @returns A well-formed data-prefixed EventSource chunk
 * @public
 */
export declare function encodeData(text: string): string

/**
 * A "chunk" is minimum allowable unit to send to the client. While a message is usually
 * what you want, there are cases where sending the retry interval separately from a
 * message makes sense, for instance.
 *
 * @public
 */
export declare type EventSourceChunk =
  | EventSourceMessage
  | Pick<Required<EventSourceMessage>, 'id'>
  | Pick<Required<EventSourceMessage>, 'retry'>
  | EventSourceComment

/**
 * An eventsource "comment" - a line starting with `:`.
 *
 * Note that comments are not readable by most EventSource clients, but can be useful for
 * debugging and to keep the connection alive - for instance by sending "heartbeats" or similar.
 *
 * @public
 */
export declare interface EventSourceComment {
  /**
   * The contents of the comment
   */
  comment: string
}

/**
 * An EventSource message to send
 *
 * @public
 */
export declare interface EventSourceMessage {
  /**
   * The data to send to the client. Always a string.
   */
  data: string
  /**
   * The event type. Browsers treat `undefined` as `"message"`.
   */
  event?: string
  /**
   * ID of the message, used to set `Last-Event-ID` header on subsequent reconnects.
   * Note that while you can theoretically send only an ID (eg no event/data), this
   * does not trigger any event - but does (on most clients) update the last event ID.
   */
  id?: string | number
  /**
   * Tells the client how many milliseconds to wait before retrying on disconnect.
   */
  retry?: number
}

export {}
